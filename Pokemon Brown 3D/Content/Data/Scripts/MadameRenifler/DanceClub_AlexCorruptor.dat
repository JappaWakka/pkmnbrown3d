version=2

:if:<Register.Registered(AlexMissing)>=true
	@Text.Show(<system.token(MadameRenifler_DanceClub_JappaWakka)>)
:else
	:if:<Register.Registered(AlexCorruptor_FirstTalk)>=false
		@Register.Register(AlexCorruptor_FirstTalk)
		:if:<Register.Registered(JappaWakka_FirstTalk)>=true
			@Text.Show(<system.token(MadameRenifler_DanceClub_AlexCorruptor_Intro)>)
		:else
			@Text.Show(<system.token(MadameRenifler_DanceClub_AlexCorruptor_Intro)>*<system.token(MadameRenifler_DanceClub_AlexCorruptor_FirstTime)>)
			:end
		:endif
	:endif
	:if:<Register.Registered(JappaWakka_FirstTalk)>=false
		@Text.Show(<system.token(MadameRenifler_DanceClub_AlexCorruptor_BeforeJappa)>)
		@NPC.Turn(0,0)
		:end
	:else
		:if:<Register.Registered(AlexCorruptor_StoryComplete)>=false
			@Storage.Set(bool,SetFirstPerson,false)
			:if:<camera.thirdperson>=true
				@Camera.Reset
				@Camera.SetToPlayerFacing
				@Camera.SetPitch(-0.063)
			:else
				@Camera.SetThirdPerson(1)
				@Camera.SetToPlayerFacing
				@Camera.SetPitch(-0.063)
				@Storage.Set(bool,SetFirstPerson,true)
			:endif
			@Entity.ShowMessageBulb(0|6|0.8325|13)
			:if:<storage.get(bool,SetFirstPerson)>=true
				@Camera.DeactivateThirdPerson
			:endif
			@Text.Show(<system.token(MadameRenifler_DanceClub_AlexCorruptor_AfterJappa_Intro)>)
			@Music.Play(MadameRenifler_Sorrow)
			@Text.Notification(<system.token(MadameRenifler_DanceClub_Music_Sorrow)>,400,4,4,,,0,1)
			@Text.Show(<system.token(MadameRenifler_DanceClub_AlexCorruptor_AfterJappa_Story)>)
			@Level.Wait(15)
			@NPC.Turn(0,0)
			@Register.Register(AlexCorruptor_StoryComplete)
			@Script.Start(MadameRenifler\DanceClub_MapScript)
			:end
		:else
			@Storage.Set(bool,SetFirstPerson,false)
			:if:<camera.thirdperson>=true
				@Camera.Reset
				@Camera.SetToPlayerFacing
				@Camera.SetPitch(-0.063)
			:else
				@Camera.SetThirdPerson(1)
				@Camera.SetToPlayerFacing
				@Camera.SetPitch(-0.063)
				@Storage.Set(bool,SetFirstPerson,true)
			:endif
			@Entity.ShowMessageBulb(0|6|0.8325|13)
			:if:<storage.get(bool,SetFirstPerson)>=true
				@Camera.DeactivateThirdPerson
			:endif
			@Level.Wait(15)
			@NPC.Turn(0,0)
			:end
		:endif
	:endif
:endif	
:end
