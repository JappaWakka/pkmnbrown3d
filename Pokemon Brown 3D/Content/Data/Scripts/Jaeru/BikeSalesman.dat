version=2

:if:<player.position(x)>=4
	@npc.turn(0,1)
:else
	@npc.turn(0,2)
:endif

:if:<Register.Registered(RideCoupon)>=false
	@Text.Show(<system.token(Jaeru_BikeShop_BikeSalesMan_NoVoucher)>)
	@options.show(<system.token(Jaeru_BikeShop_BikeSalesMan_Option_Bicycle)>,<system.token(global_cancel)>)
	:when:<system.token(Jaeru_BikeShop_BikeSalesMan_Option_Bicycle)>
		:if:<player.money>>999999
			@Text.Show(<system.token(Jaeru_BikeShop_BikeSalesMan_Answer_Bicycle_HaveEnoughMoney)>)
			@Item.Give(6,1)
			@sound.play(Receive_KeyItem,1)
			@Item.MessageGive(6,1)
			@Register.Register(gotbike)
			:end
		:else
			@Text.Show(<system.token(Jaeru_BikeShop_BikeSalesMan_Answer_Bicycle_NotEnoughMoney)>)
			:end
		:endif
	:when:<system.token(global_cancel)>
		@Text.Show(<system.token(Jaeru_BikeShop_BikeSalesMan_Answer_Cancel)>)
		:end
	:endwhen
:else
	:if:<Register.Registered(gotbike)>=false
		@Text.Show(<system.token(Jaeru_BikeShop_BikeSalesMan_HasVoucher_BeforeReceiveBike)>)
		@Item.Give(6,1)
		@sound.play(Receive_KeyItem,1)
		@Text.Color(playercolor)
		@Text.Show(<system.token(Jaeru_BikeShop_ExchangeVoucherForBike)>)
		@Text.Color(playercolor)
		@Text.Show(<system.token(Jaeru_BikeShop_BikeInPocket)>)
		@Register.Register(gotbike)
	:else
		@Text.Show(<system.token(Jaeru_BikeShop_BikeSalesMan_HasVoucher_AfterReceiveBike)>)
	:endif
:endif
:end
