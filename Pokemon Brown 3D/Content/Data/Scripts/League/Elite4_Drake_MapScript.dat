version=2

:if:<Register.Registered(defeat<level.filename>)>=true
	@entity.warp(0,~,~-5,~)
	@entity.warp(1,~,~+5,~)
:endif

:if:<Register.Registered(drakeenter)>=True
	@entity.warp(2,~,~+3,~)
	@entity.warp(3,~,~-3,~)
	@level.update
	:end
:else
	@player.StopMovement
	:if:<player.position(z)>=15
		@Player.SetSpeed(1.5)
		@player.move(7)
		@player.turnto(2)
		@Player.SetSpeed(1.5)
		@player.move(7)
		@player.turnto(1)
		@Player.SetSpeed(1.5)
		@player.move(13)
		@player.turnto(0)
		@Player.SetSpeed(1.5)
		@player.move(10)
	:else
		@Player.SetSpeed(1.5)
		@player.move(8)
		@player.turnto(2)
		@Player.SetSpeed(1.5)
		@player.move(8)
		@player.turnto(1)
		@Player.SetSpeed(1.5)
		@player.move(11)
		@player.turnto(0)
		@Player.SetSpeed(1.5)
		@player.move(10)
	:endif
		
	@Level.Wait(10)
	@sound.play(SwitchDoor)
	@entity.warp(2,~,0,~)
	@entity.warp(3,~,-3,~)
	@level.update
	@Register.Register(drakeenter)
:endif

:end